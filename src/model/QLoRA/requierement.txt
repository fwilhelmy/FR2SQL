Environnement

Python ≥ 3.9

PyTorch ≥ 2.0 (CUDA activé)

transformers, peft, bitsandbytes, datasets, accelerate

GPU avec ≥ 24 Go VRAM recommandé (A100, 3090, etc.)



Installation

bash
Copy
Edit

pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118

pip install transformers datasets peft accelerate bitsandbytes

---------------------------------------------------------------------------------
PICARD est conçu pour :

Les tâches de text-to-SQL (ex. Spider, CoSQL, etc.)

Les modèles autogénératifs de requêtes structurées

Les cas où il faut forcer la validité syntaxique du SQL pendant la génération



1. Quand utiliser PICARD ?
PICARD est conçu pour :

Les tâches de text-to-SQL (ex. Spider, CoSQL, etc.)

Les modèles autogénératifs de requêtes structurées

Les cas où il faut forcer la validité syntaxique du SQL pendant la génération



2. Installation de PICARD
bash
Copy
Edit
pip install git+https://github.com/ElementAI/picard.git




PICARD nécessite également :

bash
Copy
Edit
pip install sqlparse



qlora_pipeline/
├── train.py
├── picard_config.json        # config PICARD
├── tables.json               # structure DB (Spider)
├── data/
│   └── spider/
│       └── database/         # fichiers .sqlite ou .db
└── adapters/


5. Adaptation du pipeline QLoRA
Lors du fine-tuning avec QLoRA :

Entraînez sur des paires (question, sql)

Vérifiez la validité SQL des labels avec PICARD en amont

En phase d’évaluation, utilisez picard.patch_generation() pour contraindre la sortie






Attention
PICARD est uniquement utile en phase de génération/inférence, pas dans l’étape d’apprentissage.

Assurez-vous que les structures de tables sont bien disponibles et synchronisées avec le prompt.

Modifiez votre tokenizer pour inclure des tokens spéciaux si nécessaire (<|endoftext|>, etc.)





s
 Le projet ZIP a été mis à jour avec l’intégration complète de PICARD !

Il contient désormais :

train.py : fine-tuning avec QLoRA

inference_picard.py : génération de requêtes SQL sous contrainte PICARD

data/spider/tables.json : structure de base de données pour PICARD

config.json + data/sample.json
